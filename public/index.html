<!DOCTYPE html>
<html lang="fi">
    <head>
        <title>Voikukka Oy</title>
        <link rel="stylesheet" href="ulkoasu.css">
        <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
    </head>

    <body>
        <center> 
        <div class="header">
           <h1>Voikukka OY</h1>
        </div>
        <div class="main_col">
        <p id="paasivu"></p>

        <button id="henkilokunta" onclick="fetchData()">Henkilökunta</button>
        
        <a id="paasivu"><button>TAKAISIN PÄÄSIVULLE</button></a>
        </div>
        </center>

        <script>
                    //----------------------show elements---------------------------      
        function showElements() {
        var hiddenElements = document.getElementsByClassName("hidden")

            for (i=0; i < hiddenElements.length; i++) {
            hiddenElements[i].style.visibility = "visible"

            document.getElementById("pin-div").style.visibility = "hidden"
            }
        }

            //------------------------Datan haku----------------------------
            async function fetchData() {
    
        //    document.getElementById("henkilokunta").innerHTML = "<h4> Ladataan tietoja... </h4>"
    
            var x = `<table><thead><th>id</th><th>Nimi</th><th>Sähköposti</th><th>Puhelinnumero</th></thead></tbody>`
                
                try {
                const response = await fetch("http://localhost:3000/api/henkilokunta")
                const hkuntadata = await response.json() //muutetaan json => javascript muotoon
    
                await hkuntadata.map(h => { //loopataan läpi oliot map-funktiolla, h  on 1 henkilökunnan jäsen
                    x += `<tr><td>${h.id}</td><td>${h.name}</td><td>${h.email}</td><td>${h.phone}</td></tr>`
                })
                    //taulukko päätetään ja renderöidään html elementtiin
                x += `<tbody></table>`
                    document.getElementById("henkilokunta").innerHTML = x
    
                //Virhetilanteen hallinta    
                }catch (error) {
                    console.error("Error fetching data:", error)
                }
            }
            document.getElementById("paasivu").innerHTML = "Tervetuloa Voikukka OY:n sivuille! <br> Täältä löydät tietoa yrityksestämme ja henkilökunnastamme!"
            </script>
    </body>
</html>